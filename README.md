# SOFTWARE DESIGN
The aim of the software is to collect feedback related to an article and display feedback per article. The feedback can be a LIKE or a DISLIKE. 


## ARCHITECTURE
As part of a bigger project I’ve prefer the system to be build as a micro service to make the integration easier, rather than a standalone springboot application. Jhipster framework offers a quick build in solution to generate micro services and set up all the basic configuration as security and layers generators (Controllers, services, domain, DTO, repositories, mappers).

## DATABASE
The database for both development and testing will be a MySQL instance with an auto generated schema “Tide”. I chose to use MySQL in the test environment, rather then H2 in-memory database, because I find quicker to debug the persisted data.
In the Feedback table I used UUID as type for the entity Id and for announcementId. The idea behind that is that the announcementId will be passed as parameter in the URL to retrieve the feedback summary, and if we use a normal incremental integer, a user can spoof for other announcement feedback easier.
To maintain consistency, considering that I use a UUID as index for Announcement, I used UUID even for the id of the entity Feedback.

The database table structure is:
```
 ID: bynary(16)
 JHI_LIKE: binary data to store if the announcement has been liked or disliked
 CREATED_AT: logs creation date
 LAST_UPDATE: logs changes to the log 
```

I've opted to store multiple record per announcement rather than having a counter of like and dislike to allow the system to retrieve more data about a specific announcements (for instance the likes in a specific interval).


## ENDPOINT
Following a good practice of RESTful design the endpoint to collect data will use POST method while the endpoint to summarise feedbacks for a specific announcement use a GET method.


## TESTING
The project contains integration tests and unit test both with coverage 100% on lines and methods. I tried to test the code as it is and its behavior passing invalid data to handle the exceptions.

To test the application easily I provided a simple swagger UI implementation at http://localhost:8081/swagger-ui.html

## CURL
* CREATE
```sh
curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{ \ 
   "announcementId": "34b6e0a9-4424-4d9a-ac85-b89fa53f917f", \ 
   "like": true \ 
 }' 'http://localhost:8081/api/feedbacks'
```
* STATS
```sh
curl -X GET --header 'Accept: application/json' 'http://localhost:8081/api/feedbacks/stats/34b6e0a9-4424-4d9a-ac85-b89fa53f917f'
```


# NOTES

* Some data have been auto generated in the database with announcement id 
 ``` 312c41e2-445c-4e9e-83b8-a2cb63c99c22 ``` and  ``` 34b6e0a9-4424-4d9a-ac85-b89fa53f917f ```
* The body content for the stats has the following structuress
    ``` json
    {
        "likes": 200,
        "dislikes: 10
    }
    ```
* The size of supported thread has been set from 0 to 200 to increase performance
* The enpoint ```/api/**``` has been set as .permitAll() just for dev purpose

# DEPLOY
In oreder to run correctly the project you must use two Maven profile ``` dev ``` and ``` IDE ```. This due to a beta release for the mapping functionalities auto generated by jHipster. Withouth ``` IDE ``` the system will throw an exception @Mapper class not found.







